# MingLog桌面应用功能测试指南

## 🔧 修复内容

### 问题诊断
1. **API权限问题**: Tauri配置中`allowlist.all`被设置为`false`，导致所有API调用被阻止
2. **API导入问题**: 前端使用了ES6模块导入，但在某些情况下可能不可用

### 修复措施
1. **启用API权限**: 在`tauri.conf.json`中启用了必要的API权限
   - 文件系统操作 (`fs`)
   - 对话框 (`dialog`) 
   - 协议资源 (`protocol`)

2. **修复API导入**: 将前端的API导入从ES6模块改为全局对象
   ```javascript
   // 修复前
   import { invoke } from '@tauri-apps/api/tauri';
   
   // 修复后
   const { invoke } = window.__TAURI__.tauri;
   ```

## 🧪 功能测试步骤

### 1. 基本功能测试

#### ✅ 新建页面
1. 点击"新建页面"按钮
2. 输入页面名称（如："测试页面"）
3. 确认页面是否在左侧列表中出现
4. 确认页面内容区域是否显示新页面

#### ✅ 创建示例数据
1. 点击"创建示例数据"按钮
2. 等待处理完成
3. 确认是否显示"示例数据创建成功!"消息
4. 检查左侧是否出现示例页面

#### ✅ 文件操作
1. 点击"文件操作"按钮
2. 测试以下功能：
   - **导入Markdown文件**: 应显示文件选择对话框
   - **导出所有页面**: 应显示目录选择对话框
   - **创建备份**: 应显示保存位置对话框
   - **恢复备份**: 应显示文件选择对话框

### 2. 高级功能测试

#### 📝 页面编辑
1. 选择一个页面
2. 在编辑区域输入内容
3. 按Enter键创建新块
4. 确认内容是否保存

#### 🔍 搜索功能
1. 在搜索框中输入关键词
2. 确认搜索结果是否正确显示
3. 点击搜索结果确认是否跳转到对应页面

#### 🏷️ 标签管理
1. 为页面添加标签
2. 确认标签是否正确显示
3. 通过标签筛选页面

### 3. 错误处理测试

#### ⚠️ 异常情况
1. 输入空的页面名称
2. 尝试删除不存在的页面
3. 导入无效的文件格式
4. 确认错误消息是否正确显示

## 📊 预期结果

### ✅ 成功指标
- 所有按钮都有响应
- 页面创建和编辑功能正常
- 文件操作对话框正常弹出
- 数据持久化正常工作
- 错误消息正确显示

### ⚠️ 已知限制
1. **搜索功能**: FTS全文搜索表可能缺失，基本搜索仍可用
2. **文件对话框**: 某些高级文件操作可能需要进一步配置
3. **错误报告**: Sentry集成已禁用，使用本地错误处理

## 🔧 故障排除

### 如果按钮仍无响应
1. 打开开发者工具 (F12)
2. 查看控制台错误信息
3. 确认是否有API调用失败

### 如果文件操作失败
1. 确认应用有足够的文件系统权限
2. 检查目标目录是否可写
3. 确认文件格式是否支持

### 如果数据不持久化
1. 检查数据库文件是否创建
2. 确认应用有写入权限
3. 重启应用测试数据是否保留

## 📈 性能验证

### 启动性能
- 应用启动时间: < 3秒
- 界面响应时间: < 1秒
- 内存使用: < 100MB

### 操作性能
- 页面创建: < 1秒
- 内容保存: < 0.5秒
- 搜索响应: < 2秒

## 🎯 下一步建议

### 如果测试通过
1. 可以开始正常使用应用
2. 考虑创建更多测试数据
3. 探索高级功能

### 如果测试失败
1. 记录具体的错误信息
2. 检查系统兼容性
3. 考虑重新构建应用

---

**注意**: 这是一个开发版本，某些高级功能可能需要进一步完善。基本的知识管理功能应该完全可用。
