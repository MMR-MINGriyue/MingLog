# MingLog 编辑器功能测试指南

## 🎯 测试目标
验证所有新增的编辑器功能是否正常工作，包括拖拽、键盘快捷键、块类型切换、缩进和视觉效果。

## 🚀 快速启动测试

### 启动应用程序
```bash
# 方法1: 直接运行
./build/win-unpacked/MingLog.exe

# 方法2: 使用脚本
powershell -ExecutionPolicy Bypass -File dev-start.ps1
```

### 打开测试面板
- 按 `Ctrl + Shift + T` 打开/关闭测试面板
- 按 `Ctrl + Shift + R` 重新运行自动测试

## 📋 详细测试清单

### ✅ 基础功能测试

#### 1. 块创建和导航
- [ ] **Enter键创建新块**
  - 操作: 在任意块中按 `Enter`
  - 期望: 在当前块后创建新的空白块
  - 错误提示: "新块创建失败"

- [ ] **箭头键导航**
  - 操作: 按 `↑` `↓` 箭头键
  - 期望: 光标在块间移动
  - 错误提示: "块导航失败"

- [ ] **空块删除**
  - 操作: 在空块中按 `Backspace`
  - 期望: 删除空块或与上一块合并
  - 错误提示: "块删除失败"

#### 2. 拖拽功能测试
- [ ] **拖拽手柄显示**
  - 操作: 鼠标悬停在块上
  - 期望: 左侧显示 `⋮⋮` 拖拽手柄
  - 错误提示: "拖拽手柄未显示"

- [ ] **拖拽重排**
  - 操作: 拖拽手柄移动块
  - 期望: 块位置改变，有视觉反馈
  - 错误提示: "拖拽功能失效"

- [ ] **拖拽视觉效果**
  - 操作: 拖拽过程中观察
  - 期望: 块变透明、旋转，显示插入线
  - 错误提示: "拖拽视觉效果缺失"

#### 3. 缩进和层级测试
- [ ] **Tab缩进**
  - 操作: 选中块后按 `Tab`
  - 期望: 块向右缩进，显示缩进线
  - 错误提示: "缩进功能失效"

- [ ] **Shift+Tab取消缩进**
  - 操作: 在缩进块中按 `Shift + Tab`
  - 期望: 块向左移动，缩进减少
  - 错误提示: "取消缩进失效"

- [ ] **缩进线显示**
  - 操作: 创建多级缩进
  - 期望: 显示垂直的缩进指示线
  - 错误提示: "缩进线未显示"

- [ ] **折叠按钮**
  - 操作: 创建父子块结构
  - 期望: 父块显示折叠按钮 `▼`
  - 错误提示: "折叠按钮未出现"

#### 4. 块类型切换测试
- [ ] **工具栏显示**
  - 操作: 点击块使其获得焦点
  - 期望: 上方显示类型切换工具栏
  - 错误提示: "类型工具栏未显示"

- [ ] **快捷键切换**
  - 操作: 按 `Ctrl + Alt + 1/2/3/0/Q/C/L`
  - 期望: 块类型相应改变
  - 错误提示: "快捷键切换失效"

- [ ] **工具栏按钮切换**
  - 操作: 点击工具栏按钮
  - 期望: 块类型改变，按钮状态更新
  - 错误提示: "工具栏按钮失效"

### 🎨 视觉效果测试

#### 5. 悬停和聚焦效果
- [ ] **悬停效果**
  - 操作: 鼠标悬停在块上
  - 期望: 渐变背景、阴影、左侧指示条
  - 错误提示: "悬停效果缺失"

- [ ] **聚焦效果**
  - 操作: 点击块使其获得焦点
  - 期望: 蓝色边框、高亮背景、工具栏显示
  - 错误提示: "聚焦效果缺失"

- [ ] **动画过渡**
  - 操作: 各种状态切换
  - 期望: 平滑的动画过渡
  - 错误提示: "动画效果缺失"

#### 6. 块类型样式
- [ ] **标题样式**
  - 操作: 切换为H1/H2/H3
  - 期望: 字体大小和粗细相应改变
  - 错误提示: "标题样式错误"

- [ ] **引用样式**
  - 操作: 切换为引用块
  - 期望: 左侧蓝色边框，斜体文字
  - 错误提示: "引用样式错误"

- [ ] **代码样式**
  - 操作: 切换为代码块
  - 期望: 深色背景，等宽字体
  - 错误提示: "代码样式错误"

- [ ] **列表样式**
  - 操作: 切换为列表项
  - 期望: 左侧显示项目符号
  - 错误提示: "列表样式错误"

### ⚡ 高级功能测试

#### 7. 块操作快捷键
- [ ] **复制块 (Ctrl+D)**
  - 操作: 按 `Ctrl + D`
  - 期望: 在当前块后创建相同内容的块
  - 错误提示: "块复制失效"

- [ ] **向上移动 (Ctrl+Shift+↑)**
  - 操作: 按 `Ctrl + Shift + ↑`
  - 期望: 当前块向上移动一个位置
  - 错误提示: "向上移动失效"

- [ ] **向下移动 (Ctrl+Shift+↓)**
  - 操作: 按 `Ctrl + Shift + ↓`
  - 期望: 当前块向下移动一个位置
  - 错误提示: "向下移动失效"

#### 8. 折叠展开功能
- [ ] **折叠子块**
  - 操作: 点击折叠按钮 `▼`
  - 期望: 子块隐藏，按钮变为 `▶`
  - 错误提示: "折叠功能失效"

- [ ] **展开子块**
  - 操作: 点击展开按钮 `▶`
  - 期望: 子块显示，按钮变为 `▼`
  - 错误提示: "展开功能失效"

## 🐛 错误监测和报告

### 自动错误检测
应用程序会自动检测以下错误：
- JavaScript运行时错误
- 未处理的Promise拒绝
- 功能测试失败
- 事件绑定失败

### 错误提示类型
- **红色通知**: 严重错误，功能无法使用
- **黄色通知**: 警告，功能可能不稳定
- **蓝色通知**: 信息提示
- **绿色通知**: 成功操作

### 查看详细日志
1. 按 `F12` 打开开发者工具
2. 查看 Console 标签页
3. 查看错误堆栈信息
4. 按 `Ctrl + Shift + T` 查看测试面板

## 📊 测试报告

### 测试完成标准
- [ ] 所有基础功能测试通过
- [ ] 所有视觉效果正常显示
- [ ] 所有快捷键响应正确
- [ ] 无JavaScript错误
- [ ] 用户体验流畅

### 性能指标
- 块创建响应时间 < 100ms
- 拖拽操作流畅度 > 30fps
- 类型切换延迟 < 50ms
- 内存使用稳定

## 🔧 故障排除

### 常见问题
1. **功能不响应**: 检查JavaScript错误
2. **样式显示异常**: 检查CSS加载
3. **快捷键失效**: 检查事件绑定
4. **性能问题**: 检查内存使用

### 重置方法
1. 刷新页面: `Ctrl + R`
2. 重启应用程序
3. 清除缓存数据
4. 重新运行测试: `Ctrl + Shift + R`
