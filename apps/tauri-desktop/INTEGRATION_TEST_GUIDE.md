# 🧪 MingLog 集成功能测试指南

## 📋 测试概述

本指南将帮助您全面测试 MingLog 的集成功能，确保图谱可视化、编辑器和数据同步功能正常工作。

## 🚀 快速开始

### 1. 启动开发服务器
```bash
cd apps/tauri-desktop
npm run dev
```

### 2. 访问测试页面
- **集成测试页面**: http://localhost:1420/integration-test
- **集成工作空间**: http://localhost:1420/workspace
- **主页导航**: http://localhost:1420

## 🎯 测试方法

### 方法一：自动化测试 (推荐)

1. **打开集成测试页面**
   - 访问: http://localhost:1420/integration-test
   - 点击 "运行测试" 按钮
   - 查看测试结果和通过率

2. **测试覆盖范围**
   - ✅ 数据同步服务初始化
   - ✅ 图谱数据结构验证
   - ✅ 图谱数据更新和同步
   - ✅ 编辑器内容同步到图谱
   - ✅ 搜索索引自动更新
   - ✅ 节点选择事件处理
   - ✅ 性能测试 (更新速度 < 1秒)
   - ✅ 错误处理机制

### 方法二：手动功能测试

#### A. 集成工作空间测试
1. **访问集成工作空间**: http://localhost:1420/workspace

2. **测试图谱功能**
   - 验证图谱节点正确显示
   - 测试节点拖拽和缩放
   - 检查节点连接线显示

3. **测试双向链接**
   - 点击图谱中的笔记节点
   - 验证编辑器是否自动加载对应内容
   - 检查节点选择状态同步

4. **测试布局切换**
   - 点击工具栏中的布局按钮
   - 测试 "仅图谱"、"分割视图"、"仅编辑器" 三种模式
   - 验证分割线拖拽调整功能

5. **测试编辑器同步**
   - 在编辑器中输入内容
   - 观察图谱节点是否实时更新
   - 测试标签和链接的自动识别

#### B. 单独功能测试
1. **图谱页面**: http://localhost:1420/graph
   - 测试图谱渲染性能
   - 验证过滤器功能
   - 测试不同布局算法

2. **编辑器页面**: http://localhost:1420/editor
   - 测试块编辑功能
   - 验证拖拽排序
   - 测试不同块类型

3. **搜索页面**: http://localhost:1420/search
   - 测试搜索功能
   - 验证搜索索引更新

### 方法三：浏览器控制台测试

1. **打开开发者工具**
   - 按 F12 或右键 → 检查元素
   - 切换到 Console 标签

2. **运行测试命令**
   ```javascript
   // 运行完整集成测试
   runIntegrationTests()
   
   // 查看数据同步服务状态
   console.log(window.dataSyncService?.getState())
   ```

3. **查看详细日志**
   - 观察测试执行过程
   - 检查错误信息和性能数据

## 📊 测试结果解读

### 成功指标
- ✅ **测试通过率**: 100% (所有测试通过)
- ✅ **图谱渲染**: 节点和连接正确显示
- ✅ **双向同步**: 编辑器 ↔ 图谱实时同步
- ✅ **性能表现**: 数据更新 < 1秒，内容同步 < 500ms
- ✅ **错误处理**: 无未捕获异常

### 常见问题排查

#### 1. 图谱不显示
- 检查浏览器控制台是否有 D3.js 相关错误
- 验证图谱数据是否正确加载
- 确认容器尺寸是否正确

#### 2. 编辑器同步失败
- 检查数据同步服务是否正常初始化
- 验证事件监听器是否正确绑定
- 查看网络请求是否成功

#### 3. 性能问题
- 检查数据量是否过大
- 验证是否有内存泄漏
- 观察 CPU 使用率

#### 4. 布局问题
- 检查 CSS 样式是否正确加载
- 验证响应式布局在不同屏幕尺寸下的表现
- 测试分割线拖拽功能

## 🔧 高级测试

### 压力测试
1. **大数据量测试**
   - 创建包含 100+ 节点的图谱
   - 测试渲染性能和交互响应
   - 验证内存使用情况

2. **并发操作测试**
   - 同时进行图谱操作和编辑器输入
   - 测试数据同步的一致性
   - 验证事件处理的稳定性

### 兼容性测试
1. **浏览器兼容性**
   - Chrome (推荐)
   - Firefox
   - Edge
   - Safari

2. **屏幕尺寸测试**
   - 桌面端 (1920x1080)
   - 笔记本 (1366x768)
   - 平板横屏 (1024x768)

## 📝 测试报告

### 测试环境
- **操作系统**: Windows 11
- **Node.js 版本**: v18+
- **浏览器**: Chrome 最新版
- **开发服务器**: Vite 6.3.5

### 测试数据
- **图谱节点**: 6个 (3个笔记 + 3个标签)
- **图谱连接**: 6个 (标签连接 + 引用连接)
- **编辑器块**: 5个 (标题、段落、列表等)

### 性能基准
- **图谱渲染**: < 200ms
- **数据更新**: < 1000ms
- **内容同步**: < 500ms
- **事件响应**: < 100ms

## 🎉 测试完成检查清单

- [ ] 自动化测试 100% 通过
- [ ] 图谱正确渲染和交互
- [ ] 编辑器功能正常
- [ ] 双向同步工作正常
- [ ] 布局切换功能正常
- [ ] 性能满足基准要求
- [ ] 错误处理机制有效
- [ ] 用户界面响应流畅

## 🆘 获取帮助

如果测试过程中遇到问题：

1. **查看浏览器控制台**：检查错误信息
2. **检查网络请求**：确认 API 调用正常
3. **重启开发服务器**：解决缓存问题
4. **清除浏览器缓存**：确保使用最新代码

---

**祝您测试顺利！** 🚀
