# MingLog 手动修复步骤

**问题**: 批处理脚本出现编码问题  
**解决方案**: 手动执行构建命令  
**预计时间**: 5-10分钟  

## 🔧 **方法1：使用新的英文脚本**

### **选项A：使用批处理脚本**
1. 双击运行 `rebuild-minglog.bat`
2. 等待构建完成
3. 选择 Y 启动应用

### **选项B：使用PowerShell脚本**
1. 右键点击 `rebuild-minglog.ps1`
2. 选择"使用PowerShell运行"
3. 如果提示执行策略，输入：`Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`
4. 重新运行脚本

## 🔧 **方法2：手动命令行操作**

### **步骤1：打开命令提示符**
1. 按 `Win + R`
2. 输入 `cmd`
3. 按回车

### **步骤2：导航到项目目录**
```cmd
cd /d D:\Git\MingLog\apps\tauri-desktop
```

### **步骤3：清理旧构建**
```cmd
rmdir /s /q dist
del src-tauri\target\release\minglog-desktop.exe
```

### **步骤4：重新构建前端**
```cmd
npm run build
```
**等待完成，应该看到类似输出**：
```
✓ built in 5.64s
```

### **步骤5：重新构建Tauri应用**
```cmd
npm run tauri build
```
**等待完成，应该看到**：
```
Finished release [optimized] target(s)
```

### **步骤6：启动应用**
```cmd
start src-tauri\target\release\minglog-desktop.exe
```

## 🔧 **方法3：使用文件管理器**

### **如果命令行有问题，可以手动操作**：

1. **删除旧构建**：
   - 进入 `D:\Git\MingLog\apps\tauri-desktop`
   - 删除 `dist` 文件夹
   - 进入 `src-tauri\target\release`
   - 删除 `minglog-desktop.exe`

2. **打开PowerShell**：
   - 在 `D:\Git\MingLog\apps\tauri-desktop` 文件夹中
   - 按住 Shift + 右键
   - 选择"在此处打开PowerShell窗口"

3. **执行构建命令**：
   ```powershell
   npm run build
   npm run tauri build
   ```

4. **启动应用**：
   - 进入 `src-tauri\target\release`
   - 双击 `minglog-desktop.exe`

## 📊 **预期结果**

### **成功标志**：
- **前端构建成功**：看到 `✓ built in X.XXs`
- **Tauri构建成功**：看到 `Finished release [optimized] target(s)`
- **文件生成**：`src-tauri\target\release\minglog-desktop.exe` 存在
- **应用启动**：显示绿色成功页面而不是错误页面

### **如果看到成功页面**：
应用应该显示：
```
🎉 MingLog Desktop
应用已成功启动！这是一个最小化测试版本。
```

### **如果仍然看到错误**：
错误页面现在应该显示更多调试信息：
- 错误详情
- 时间戳
- 用户代理
- URL信息

## 🚨 **常见问题解决**

### **问题1：npm命令不识别**
**解决方案**：
```cmd
where npm
```
如果没有输出，需要安装Node.js或添加到PATH

### **问题2：权限不足**
**解决方案**：
- 以管理员身份运行命令提示符
- 或者使用PowerShell管理员模式

### **问题3：构建失败**
**解决方案**：
```cmd
npm install
npm run build
```

### **问题4：Tauri构建失败**
**解决方案**：
```cmd
cd src-tauri
cargo clean
cd ..
npm run tauri build
```

## 📞 **如果仍然失败**

### **收集信息**：
1. **构建输出**：复制完整的构建日志
2. **错误信息**：截图或复制错误消息
3. **文件状态**：检查以下文件是否存在：
   - `dist/index.html`
   - `src-tauri/target/release/minglog-desktop.exe`

### **报告问题**：
请提供：
- 执行的具体步骤
- 完整的错误输出
- 系统信息（Windows版本）
- Node.js和npm版本

## 🎯 **成功后的下一步**

### **如果最小化版本成功**：
1. 编辑 `src/main.tsx`
2. 将第4行改回：`import App from './App'`
3. 重新执行构建步骤
4. 测试完整功能

### **如果完整版本成功**：
1. 测试所有核心功能
2. 验证性能指标
3. 准备正式使用

---

**建议顺序**：
1. 先尝试新的英文脚本
2. 如果失败，使用手动命令行
3. 如果还失败，使用文件管理器方法
4. 记录所有错误信息以便进一步诊断
