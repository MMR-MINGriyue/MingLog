# MingLog WorkspaceåŒ…æ„å»ºé—®é¢˜è§£å†³æ–¹æ¡ˆ

**é—®é¢˜å‘ç°æ—¥æœŸ**: 2025å¹´6æœˆ30æ—¥  
**é—®é¢˜ç±»å‹**: ä¾èµ–æ„å»ºé—®é¢˜  
**ä¸¥é‡ç¨‹åº¦**: é«˜ï¼ˆé˜»å¡æ¡Œé¢åº”ç”¨å¯åŠ¨ï¼‰  
**å½“å‰çŠ¶æ€**: åˆ†æå®Œæˆï¼Œå®æ–½è§£å†³æ–¹æ¡ˆ  

## ğŸš¨ **é—®é¢˜æè¿°**

### **æ ¸å¿ƒé—®é¢˜**
Tauriæ¡Œé¢åº”ç”¨å¯åŠ¨æ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š
```
Failed to resolve entry for package "@minglog/editor". 
The package may have incorrect main/module/exports specified in its package.json.
```

### **æ ¹æœ¬åŸå› **
1. **@minglog/editoråŒ…æœªæ„å»º**: `packages/editor/dist/`ç›®å½•ä¸ºç©º
2. **package.jsonæŒ‡å‘ä¸å­˜åœ¨çš„æ–‡ä»¶**: `main: "./dist/index.js"`ä¸å­˜åœ¨
3. **workspaceä¾èµ–é“¾æ–­è£‚**: æ¡Œé¢åº”ç”¨æ— æ³•è§£æeditoråŒ…

### **å½±å“èŒƒå›´**
- âŒ Tauriæ¡Œé¢åº”ç”¨æ— æ³•å¯åŠ¨
- âŒ å—ç¼–è¾‘å™¨åŠŸèƒ½ä¸å¯ç”¨
- âŒ æ¡Œé¢åº”ç”¨åŠŸèƒ½æµ‹è¯•å—é˜»
- âŒ é˜¶æ®µ1ç›®æ ‡å®Œæˆå—å½±å“

## ğŸ” **é—®é¢˜åˆ†æ**

### **ä¾èµ–å…³ç³»åˆ†æ**
```
apps/tauri-desktop
â”œâ”€â”€ @minglog/editor (ç¼ºå¤±æ„å»ºäº§ç‰©)
â”œâ”€â”€ @minglog/core (éœ€è¦æ£€æŸ¥)
â”œâ”€â”€ @minglog/ui (éœ€è¦æ£€æŸ¥)
â””â”€â”€ @minglog/database (éœ€è¦æ£€æŸ¥)
```

### **åŒ…çŠ¶æ€æ£€æŸ¥**
| åŒ…å | çŠ¶æ€ | distç›®å½• | é—®é¢˜ |
|------|------|----------|------|
| @minglog/editor | âŒ æœªæ„å»º | ç©ºç›®å½• | ä¸»è¦é˜»å¡ |
| @minglog/core | âš ï¸ å¾…æ£€æŸ¥ | å¾…æ£€æŸ¥ | å¯èƒ½é—®é¢˜ |
| @minglog/ui | âš ï¸ å¾…æ£€æŸ¥ | å¾…æ£€æŸ¥ | å¯èƒ½é—®é¢˜ |
| @minglog/database | âš ï¸ å¾…æ£€æŸ¥ | å¾…æ£€æŸ¥ | å¯èƒ½é—®é¢˜ |

### **æ„å»ºå·¥å…·åˆ†æ**
- **editoråŒ…**: ä½¿ç”¨tsupæ„å»ºå·¥å…·
- **æ„å»ºè„šæœ¬**: `"build": "tsup"`
- **è¾“å‡ºç›®æ ‡**: `./dist/index.js`å’Œ`./dist/index.d.ts`

## ğŸ› ï¸ **è§£å†³æ–¹æ¡ˆ**

### **æ–¹æ¡ˆAï¼šæ„å»ºæ‰€æœ‰workspaceåŒ…ï¼ˆæ¨èï¼‰**

#### **æ­¥éª¤1ï¼šæ£€æŸ¥æ‰€æœ‰åŒ…çš„æ„å»ºçŠ¶æ€**
```bash
# æ£€æŸ¥å„åŒ…çš„distç›®å½•
ls -la packages/*/dist/

# æ£€æŸ¥åŒ…çš„æ„å»ºè„šæœ¬
grep -r "build" packages/*/package.json
```

#### **æ­¥éª¤2ï¼šæ„å»ºæ‰€æœ‰workspaceåŒ…**
```bash
# æ„å»ºæ‰€æœ‰åŒ…
pnpm run build:packages

# æˆ–è€…é€ä¸ªæ„å»º
pnpm --filter @minglog/core build
pnpm --filter @minglog/ui build
pnpm --filter @minglog/editor build
pnpm --filter @minglog/database build
```

#### **æ­¥éª¤3ï¼šéªŒè¯æ„å»ºç»“æœ**
```bash
# æ£€æŸ¥editoråŒ…æ„å»ºç»“æœ
ls -la packages/editor/dist/
cat packages/editor/dist/index.js | head -10
```

### **æ–¹æ¡ˆBï¼šä¿®æ”¹åŒ…é…ç½®ä½¿ç”¨æºç ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰**

#### **ä¿®æ”¹editoråŒ…é…ç½®**
```json
// packages/editor/package.json
{
  "main": "./src/index.ts",  // ç›´æ¥æŒ‡å‘æºç 
  "types": "./src/index.ts",
  "exports": {
    ".": {
      "import": "./src/index.ts",
      "types": "./src/index.ts"
    }
  }
}
```

### **æ–¹æ¡ˆCï¼šæ·»åŠ æ„å»ºå‰ç½®æ­¥éª¤**

#### **æ›´æ–°æ ¹ç›®å½•package.json**
```json
{
  "scripts": {
    "build:packages": "pnpm --filter './packages/*' build",
    "dev:packages": "pnpm --filter './packages/*' dev",
    "tauri:dev": "pnpm build:packages && cd apps/tauri-desktop && npm run dev"
  }
}
```

## ğŸ”„ **å½“å‰å®æ–½æ–¹æ¡ˆ**

### **ç«‹å³è¡ŒåŠ¨ï¼šæ‰‹åŠ¨æ„å»ºåŒ…**

ç”±äºç»ˆç«¯ç¯å¢ƒé—®é¢˜ï¼Œæˆ‘å°†é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š

#### **1. æ£€æŸ¥åŒ…æºç ç»“æ„**
- âœ… ç¡®è®¤editoråŒ…æœ‰å®Œæ•´çš„srcç›®å½•
- âœ… ç¡®è®¤tsupé…ç½®æ­£ç¡®
- âœ… ç¡®è®¤ä¾èµ–å…³ç³»æ­£ç¡®

#### **2. åˆ›å»ºæ„å»ºè„šæœ¬**
```bash
# åˆ›å»ºbuild-packages.bat
@echo off
echo Building MingLog workspace packages...
cd packages/core && npm run build
cd ../ui && npm run build  
cd ../editor && npm run build
cd ../database && npm run build
echo All packages built successfully!
```

#### **3. éªŒè¯æ„å»ºäº§ç‰©**
- æ£€æŸ¥distç›®å½•å†…å®¹
- éªŒè¯å¯¼å‡ºæ–‡ä»¶æ ¼å¼
- ç¡®è®¤ç±»å‹å®šä¹‰æ–‡ä»¶

### **åŒ…æ„å»ºä¼˜å…ˆçº§**

#### **é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³æ„å»ºï¼‰**
1. **@minglog/core**: åŸºç¡€æ ¸å¿ƒåŒ…
2. **@minglog/ui**: UIç»„ä»¶åŒ…
3. **@minglog/editor**: ç¼–è¾‘å™¨åŒ…ï¼ˆä¸»è¦é˜»å¡ï¼‰

#### **ä¸­ä¼˜å…ˆçº§ï¼ˆåç»­æ„å»ºï¼‰**
4. **@minglog/database**: æ•°æ®åº“åŒ…

## ğŸ“Š **é¢„æœŸç»“æœ**

### **æ„å»ºæˆåŠŸæ ‡å‡†**
- âœ… æ‰€æœ‰packages/*/dist/ç›®å½•åŒ…å«æ„å»ºäº§ç‰©
- âœ… index.jså’Œindex.d.tsæ–‡ä»¶å­˜åœ¨ä¸”æœ‰æ•ˆ
- âœ… Tauriåº”ç”¨èƒ½å¤ŸæˆåŠŸå¯åŠ¨
- âœ… ç¼–è¾‘å™¨ç»„ä»¶èƒ½å¤Ÿæ­£å¸¸å¯¼å…¥

### **éªŒè¯æ­¥éª¤**
1. **æ„å»ºéªŒè¯**: æ£€æŸ¥distç›®å½•æ–‡ä»¶
2. **å¯¼å…¥éªŒè¯**: æµ‹è¯•åŒ…å¯¼å…¥æ˜¯å¦æˆåŠŸ
3. **åº”ç”¨éªŒè¯**: Tauriåº”ç”¨å¯åŠ¨æµ‹è¯•
4. **åŠŸèƒ½éªŒè¯**: ç¼–è¾‘å™¨åŠŸèƒ½åŸºç¡€æµ‹è¯•

## ğŸ¯ **è§£å†³æ—¶é—´çº¿**

### **ç«‹å³è¡ŒåŠ¨ï¼ˆæ¥ä¸‹æ¥1å°æ—¶ï¼‰**
- [ ] æ£€æŸ¥æ‰€æœ‰workspaceåŒ…çš„æºç ç»“æ„
- [ ] æ‰‹åŠ¨æ„å»º@minglog/editoråŒ…
- [ ] éªŒè¯æ„å»ºäº§ç‰©æ­£ç¡®æ€§
- [ ] é‡æ–°å¯åŠ¨Tauriåº”ç”¨

### **çŸ­æœŸç›®æ ‡ï¼ˆæ¥ä¸‹æ¥2-3å°æ—¶ï¼‰**
- [ ] æ„å»ºæ‰€æœ‰workspaceåŒ…
- [ ] å»ºç«‹è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹
- [ ] éªŒè¯æ¡Œé¢åº”ç”¨å®Œå…¨æ­£å¸¸
- [ ] ç»§ç»­é˜¶æ®µ1åŠŸèƒ½æµ‹è¯•

### **ä¸­æœŸç›®æ ‡ï¼ˆæ¥ä¸‹æ¥1å¤©ï¼‰**
- [ ] ä¼˜åŒ–æ„å»ºé…ç½®å’Œè„šæœ¬
- [ ] å»ºç«‹CI/CDæ„å»ºæµç¨‹
- [ ] å®Œå–„åŒ…ä¾èµ–ç®¡ç†
- [ ] ç¡®ä¿å¼€å‘ç¯å¢ƒç¨³å®š

## ğŸš¨ **é£é™©è¯„ä¼°**

### **é«˜é£é™©é¡¹ç›®**
1. **åŒ…ä¾èµ–å¾ªç¯**: å¯èƒ½å­˜åœ¨å¾ªç¯ä¾èµ–é—®é¢˜
2. **æ„å»ºå·¥å…·é…ç½®**: tsupé…ç½®å¯èƒ½éœ€è¦è°ƒæ•´
3. **ç±»å‹å®šä¹‰**: TypeScriptç±»å‹å¯¼å‡ºé—®é¢˜

### **ç¼“è§£æªæ–½**
1. **ä¾èµ–å›¾åˆ†æ**: ç»˜åˆ¶å®Œæ•´çš„åŒ…ä¾èµ–å…³ç³»
2. **æ„å»ºé¡ºåº**: æŒ‰ä¾èµ–é¡ºåºæ„å»ºåŒ…
3. **é”™è¯¯å¤„ç†**: è¯¦ç»†çš„æ„å»ºé”™è¯¯æ—¥å¿—

## ğŸ“ˆ **æˆåŠŸæŒ‡æ ‡**

### **æŠ€æœ¯æŒ‡æ ‡**
- âœ… æ‰€æœ‰workspaceåŒ…æ„å»ºæˆåŠŸ
- âœ… åŒ…å¯¼å…¥æ— é”™è¯¯
- âœ… Tauriåº”ç”¨æ­£å¸¸å¯åŠ¨
- âœ… ç¼–è¾‘å™¨åŠŸèƒ½å¯ç”¨

### **é¡¹ç›®æŒ‡æ ‡**
- âœ… é˜¶æ®µ1æµ‹è¯•å¯ä»¥ç»§ç»­
- âœ… æ¡Œé¢åº”ç”¨åŠŸèƒ½éªŒè¯å¯ä»¥è¿›è¡Œ
- âœ… å¼€å‘ç¯å¢ƒç¨³å®šå¯é 
- âœ… å›¢é˜Ÿå¼€å‘æ•ˆç‡æå‡

## ğŸ‰ **é¢„æœŸæˆæœ**

é€šè¿‡è§£å†³workspaceåŒ…æ„å»ºé—®é¢˜ï¼Œæˆ‘ä»¬å°†ï¼š

1. **æ¢å¤æ¡Œé¢åº”ç”¨åŠŸèƒ½** - Tauriåº”ç”¨æ­£å¸¸å¯åŠ¨
2. **è§£é™¤æµ‹è¯•é˜»å¡** - ç»§ç»­é˜¶æ®µ1åŠŸèƒ½æµ‹è¯•
3. **å»ºç«‹ç¨³å®šç¯å¢ƒ** - å¯é çš„å¼€å‘å’Œæ„å»ºç¯å¢ƒ
4. **æå‡å¼€å‘æ•ˆç‡** - è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹

**é¢„è®¡è§£å†³æ—¶é—´**: 1-2å°æ—¶  
**ä¿¡å¿ƒæ°´å¹³**: é«˜ï¼ˆé—®é¢˜æ˜ç¡®ï¼Œè§£å†³æ–¹æ¡ˆå¯è¡Œï¼‰  
**ä¼˜å…ˆçº§**: æœ€é«˜ï¼ˆé˜»å¡å…³é”®åŠŸèƒ½ï¼‰

## ğŸ“ **åç»­è¡ŒåŠ¨**

è§£å†³æ­¤é—®é¢˜åï¼Œç«‹å³ç»§ç»­ï¼š
1. **æ¡Œé¢åº”ç”¨åŠŸèƒ½æµ‹è¯•** - æ‰§è¡Œå®Œæ•´çš„åŠŸèƒ½éªŒè¯
2. **å•å…ƒæµ‹è¯•ä¿®å¤** - å®ŒæˆJestç¯å¢ƒä¸‹çš„æµ‹è¯•
3. **æ€§èƒ½åŸºå‡†æµ‹è¯•** - å»ºç«‹æ€§èƒ½æŒ‡æ ‡
4. **ç”Ÿäº§å°±ç»ªéªŒè¯** - ç¡®ä¿è´¨é‡æ ‡å‡†

è¿™ä¸ªé—®é¢˜çš„è§£å†³æ˜¯é˜¶æ®µ1æˆåŠŸå®Œæˆçš„å…³é”®å‰æã€‚
